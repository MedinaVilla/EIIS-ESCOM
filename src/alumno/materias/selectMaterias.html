<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Seleccionar Materias</title>
        <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no'/>
        <link rel="icon" type="image/png" href="assets/img/logoESCOM.png" />
        <link rel="stylesheet" type="text/css" href="assets/css/materiastyle.css">
        <link rel="stylesheet" type="text/css" href="assets/css/materialize/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="assets/js/jquery-3.4.1.min.js"></script>
        <script src="assets/js/materialize.min.js"></script>
        <script>
            $(document).ready(function(){
                var materias = [];
                $('#send').click(function() {
                    checked = $("input[type=checkbox]:checked").length;

                    if(!checked) {
                        $('.modal').modal();
                        $('#modal1').modal('open');
                        $('.trigger-modal').modal();
                        return false;
                    }
                    if(checked>7){
                        $('.modal').modal();
                        $('#modal2').modal('open');
                        $('.trigger-modal').modal();
                        return false;
                    }

                    materias = [];
                    $("#seleccion").empty();           
                    $.each($("input[name='curses[]']:checked"), function(){
                        materias += "(Curse)" + $(this).val() + "<br>";
                    });
                    $.each($("input[name='recurses[]']:checked"), function(){
                        materias += "(Recurse)" + $(this).val() + "<br>";
                    });
                    $("#seleccion").append(materias);
                    
                    $('.modal').modal();
                    $('#modal3').modal('open');
                    $('.trigger-modal').modal();
                    return true;
                });

                $("#clearAll").click(function(){
                    $('input[type=checkbox]').prop('checked',false);
                    materias = [];
                    $("#seleccion").empty();
                });
            });
        </script>
        <script>
            let alumno;
            function getAlumno() {
                $.ajax(
                    './src/alumno/materias/getAlumnoBD.php',
                    {
                        success: function (response) {
                            console.log(JSON.parse(response));
                            alumno = JSON.parse(response);
                        },
                        error: function () {
                            alert('There was some error performing the AJAX call!');
                        }
                    }
                );
            }
            getAlumno();

            function openModelModify(alumno) {
                $('#nombre').val(alumno.nombre);
                $('#apellidopB').val(alumno.apellidop);
                $('#apellidomB').val(alumno.apellidom);
                $('#boletaA').val(alumno.boleta);
                $('#boletaB').val(alumno.boleta);
                $('#curpB').val(alumno.curp);
                $('#fecha_nacB').val(alumno.fecha_nac);
                $('#telefonoB').val(alumno.telefono);
                
                $('.modal').modal();
                $('#modal5').modal('open');
                $('.trigger-modal').modal();
            }

            function updateAlumno() {
                $.ajax(
                    './src/alumno/materias/UpdateByAlumn.php',
                    {
                        type: "POST",
                        data: {
                            nombre: document.getElementById("nombreB").value,
                            apellidop: document.getElementById("apellidopB").value,
                            apellidom: document.getElementById("apellidomB").value,
                            boletaA: document.getElementById("boletaA").value,
                            boletaB: document.getElementById("boletaB").value,
                            curp: document.getElementById("curpB").value,
                            fecha_nac: document.getElementById("fecha_nacB").value,
                            telefono: document.getElementById("telefonoB").value
                        },
                        success: function (response) {
                            console.log(response);
                        },
                        error: function () {
                            alert('There was some error performing the AJAX call!');
                        }
                    }
                );

            }
        </script>
    </head>
    <body>
        <nav class="blue">
            <div class="nav-wrapper">
              <a href="#" class="brand-logo">&nbsp;&nbsp;Inscribir Materias</a>
              <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="./cierrasesion"><i class="large material-icons">home</i></a></li>
                <li><i onClick="openModelModify(JSON.stringify(alumno))" class='material-icons right'>create</i></li>
              </ul>
            </div>
          </nav>

           
          <h4 id="alumnoName">Hola</h4>
        
        <div id="modal1" class="modal">
            <div class="modal-content">
              <h4>Aviso</h4>
              <p class="flow-text">Tienes que Seleccionar al menos una materia a Inscribir</p>
            </div>
            <div class="modal-footer">
              <a href="#!" class="modal-close waves-effect waves-light btn">De Acuerdo</a>
            </div>
        </div>
        <div id="modal2" class="modal">
            <div class="modal-content">
              <h4>Aviso</h4>
              <p class="flow-text">Solo puedes seleccionar como máximo 7 materias</p>
            </div>
            <div class="modal-footer">
              <a href="#!" class="modal-close waves-effect waves-light btn">De Acuerdo</a>
            </div>
        </div>

        <div id="modal5" class="modal">
            <div class="modal-content">
                <div class="row">
                    <form id="modifyForm">
                        <div class="input-field col s6">
                            <input type="hidden" id="boletaA">
                            <input placeholder="Placeholder" id="nombreB" value="Jesus Medina" type="text"
                                class="validate">
                            <label for="nombre">Nombre</label>
                        </div>
                        <div class="input-field col s6">
                            <input type="hidden" id="boletaA">
                            <input placeholder="Placeholder" id="apellidopB" type="text" class="validate">
                            <label for="nombre">Apellido paterno</label>
                        </div>
                        <div class="input-field col s6">
                            <input type="hidden" id="boletaA">
                            <input placeholder="Placeholder" id="apellidomB" type="text" class="validate">
                            <label for="nombre">Apellido materno</label>
                        </div>
                        <div class="input-field col s6">
                            <input placeholder="Placeholder" id="boletaB" value="2016696644" type="text"
                                class="validate">
                            <label for="boletaB">Boleta</label>
                        </div>
                        <div class="input-field col s6">
                            <input placeholder="Placeholder" id="curpB" type="text" class="validate">
                            <label for="semestre">CURP</label>
                        </div>
                        <div class="input-field col s6">
                            <input placeholder="Placeholder" id="fecha_nacB" type="text" class="validate">
                            <label for="semestre">Fecha de nacimiento</label>
                        </div>
                        <div class="input-field col s6">
                            <input placeholder="Placeholder" id="telefonoB" type="text" class="validate">
                            <label for="telefono">Teléfono</label>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <a onClick="updateAlumno()" class="modal-close waves-effect waves-green btn">Guardar
                    Cambios</a>
                <a class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
            </div>
        </div>

        <div class="row" style="margin-top: 10px">
            <div class="col-xs-12">
                    <div class="col-xs-8 text-left">
                    <button class="btn btn-xl btn-primary sorter" data-filter="Cientifícas-Básicas">Cientifícas-Básicas</button>
                    <button class="btn btn-xl btn-primary sorter" data-filter="Profesional">Profesional</button>
                    <button class="btn btn-xl btn-primary sorter" data-filter="Institucional">Institucional</button>
                    <button class="btn btn-xl btn-primary sorter" data-filter="Terminal e Integración">Terminal e Integración</button>
                    <button class="btn btn-xl btn-primary sorter" data-filter="*">Todas</button>
                </div>
            </div>
            <br>

            <div class="col-xs-12">
                    <div class="col-xs-8 text-left">
                    <button class="btn btn-xl btn-primary orderer" data-order="asc">Ascendente</button>
                    <button class="btn btn-xl btn-primary orderer" data-order="desc">Descendente</button>
                </div>
            </div>
        </div>
        <div class="Fixed">
            <a id="clearAll" class="btn-floating pulse"><i class="material-icons">clear</i></a>
        </div>

        <div class="Fixedform">
            <a id="send" class="btn-floating pulse"><i class="material-icons">send</i></a>
        </div> 
        
        <div class="container">
        <!--<form action="./src/alumno/materias/selectMaterias.php" method="POST">-->
        <form>
            <ul id="sort-me">
                <li class="Cientifícas-Básicas" data-order="0">
                    <label>
                        <input type="checkbox" value="Análisis Vectorial" onclick="Choose(this)">
                        <span><p class="flow-text">An&aacute;lisis Vectorial</p></span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="1">
                    <label>
                        <input type="checkbox" value="Cálculo" onclick="Choose(this)">
                        <span><p class="flow-text">C&aacute;lculo</p></span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="2">
                    <label>
                        <input type="checkbox" value="Matemáticas Discretas" onclick="Choose(this)">
                        <span><p class="flow-text">Matem&aacute;ticas Discretas</p></span>
                    </label>
                </li>
                <li class="Profesional" data-order="3">
                    <label>
                        <input type="checkbox" value="Algoritmia y Programación Estructurada" onclick="Choose(this)">
                        <span><p class="flow-text">Algoritmia y Programaci&oacute;n Estructurada</p></span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="4">
                    <label>
                        <input type="checkbox" value="Física" onclick="Choose(this)">
                        <span><p class="flow-text">F&iacute;sica</p></span>
                    </label>
                </li>
                <li class="Institucional" data-order="5">
                    <label>
                        <input type="checkbox" value="Ingeniería, Ética y Sociedad" onclick="Choose(this)">
                        <span><p class="flow-text">Ingenier&iacute;a, &Eacute;tica y Sociedad</p></span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="6">
                    <label>
                        <input type="checkbox" value="Ecuaciones Diferenciales" onclick="Choose(this)">
                        <span><p class="flow-text">Ecuaciones Diferenciales</p></span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="7">
                    <label>
                        <input type="checkbox" value="Álgebra Lineal" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">&Aacute;lgebra Lineal</p>
                        </span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="8">
                    <label>
                        <input type="checkbox" value="Cálculo Aplicado" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">C&aacute;lculo Aplicado</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="9">
                    <label>
                        <input type="checkbox" value="Estructuras de Datos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Estructuras de Datos</p>
                        </span>
                    </label>
                </li>
                <li class="Institucional" data-order="10">
                    <label>
                        <input type="checkbox" value="Comunicación Oral y Escrita" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Comunicaci&oacute;n Oral y Escrita</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="11">
                    <label>
                        <input type="checkbox" value="Análisis Fundamental de Circuitos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Análisis Fundamental de Circuitos</p>
                        </span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="12">
                    <label>
                        <input type="checkbox" value="Matemáticas Avanzadas para la Ingeniería" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Matem&aacute;ticas Avanzadas para la Ingenier&iacute;a</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="13">
                    <label>
                        <input type="checkbox" value="Fundamentos Económicos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Fundamentos Econ&oacute;micos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="14">
                    <label>
                        <input type="checkbox" value="Fundamentos de Diseño Digital" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Fundamentos de Diseño Digital</p>
                        </span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="15">
                    <label>
                        <input type="checkbox" value="Teoría Computacional" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Teor&iacute;a Computacional</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="16">
                    <label>
                        <input type="checkbox" value="Bases de Datos" onclick="Choose(this)">
                        <span>
                                <p class="flow-text">Bases de Datos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="17">
                    <label>
                        <input type="checkbox" value="Programación Orientada a Objetos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Programaci&oacute;n Orientada a Objetos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="18">
                    <label>
                        <input type="checkbox" value="Electrónica Analógica" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Electr&oacute;nica Anal&oacute;gica</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="19">
                    <label>
                        <input type="checkbox" value="Redes de Computadoras" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Redes de Computadoras</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="20">
                    <label>
                        <input type="checkbox" value="Diseño de Sistemas Digitales" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Diseño de Distemas Digitales</p>
                        </span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="21">
                    <label>
                        <input type="checkbox" value="Probabilidad y Estadística" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Probabilidad y Estad&iacute;stica</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="22">
                    <label>
                        <input type="checkbox" value="Sistemas Operativos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Sistemas Operativos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="23">
                    <label>
                        <input type="checkbox" value="Análisis y Diseño Orientado a Objetos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">An&aacute;lisis y Diseño Orientado a Objetos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="24">
                    <label>
                        <input type="checkbox" value="Tecnologías para la Web" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Tecnolog&iacute;as para la Web</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="25">
                    <label>
                        <input type="checkbox" value="Administración Financiera" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Administraci&oacute;n Financiera</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="26">
                    <label>
                        <input type="checkbox" value="Arquitectura de Computadoras" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Arquitectura de Computadoras</p>
                        </span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="27">
                    <label>
                        <input type="checkbox" value="Análisis de Algoritmos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">An&aacute;lisis de Algoritmos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="28">
                    <label>
                        <input type="checkbox" value="Ingeniería de Software" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Ingenier&iacute;a de Software</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="29">
                    <label>
                        <input type="checkbox" value="Administración de Proyectos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Administraci&oacute;n de Proyectos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="30">
                    <label>
                        <input type="checkbox" value="Instrumentación" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Instrumentaci&oacute;n</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="31">
                    <label>
                        <input type="checkbox" value="Teoría de Comunicaciones y Señales" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Teor&iacute;a de Comunicaciones y Señales</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="32">
                    <label>
                        <input type="checkbox" value="Aplicaciones para Comunicaciones en Red" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Aplicaciones para Comunicaciones en Red</p>
                        </span>
                    </label>
                </li>
                <li class="Cientifícas-Básicas" data-order="33">
                    <label>
                        <input type="checkbox" value="Metodos Cuantitativos para la toma de Decisiones" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">M&eacute;todos Cuantitativos</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="34">
                    <label>
                        <input type="checkbox" value="Introducción a los Microcontroladores" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Introducci&oacute;n a los Microcontroladores</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="35">
                    <label>
                        <input type="checkbox" value="Compiladores" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Compiladores</p>
                        </span>
                    </label>
                </li>
                <li class="Terminal e Integración" data-order="36">
                    <label>
                        <input type="checkbox" value="Desarrollo de Sistemas Distribuidos" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Desarrollo de Sistemas Distribuidos</p>
                        </span>
                    </label>
                </li>
                <li class="Terminal e Integración" data-order="37">
                    <label>
                        <input type="checkbox" value="Administración de Servicios en Red" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Administraci&oacute;n de Servicios en Red</p>
                        </span>
                    </label>
                </li>
                <li class="Terminal e Integración" data-order="38">
                    <label>
                        <input type="checkbox" value="Gestión Empresarial" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Gestión Empresarial</p>
                        </span>
                    </label>
                </li>
                <li class="Institucional" data-order="39">
                    <label>
                        <input type="checkbox" value="Liderazgo" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Liderazgo</p>
                        </span>
                    </label>
                </li>
                <li class="Terminal e Integración"  data-order="40">
                    <label>
                        <input type="checkbox" value="Trabajo Terminal I" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Trabajo Terminal I</p>
                        </span>
                    </label>
                </li>
                <li class="Terminal e Integración" data-order="41">
                    <label>
                        <input type="checkbox" value="Electiva" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Electiva</p>
                        </span>
                    </label>
                </li>
                <li class="Terminal e Integración" data-order="42">
                    <label>
                    <input type="checkbox" value="Trabajo Terminal II" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Trabajo Terminal II</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="43">
                    <label>
                    <input type="checkbox" value="Optativa A" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Optativa A</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="44">
                    <label>
                    <input type="checkbox" value="Optativa B" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Optativa B</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="45">
                    <label>
                    <input type="checkbox" value="Optativa C" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Optativa C</p>
                        </span>
                    </label>
                </li>
                <li class="Profesional" data-order="46">
                    <label>
                    <input type="checkbox" value="Optativa D" onclick="Choose(this)">
                        <span>
                            <p class="flow-text">Optativa D</p>
                        </span>
                    </label>
                </li>
            </ul> 
            <div id="modal3" class="modal">
                <div class="modal-content">
                    <h4>Aviso</h4>
                    <p class="flow-text">¿Estas Seg&uacute;ro de quieres Inscribir estas Materias?</p>
                    <p id="seleccion" class="flow-text"></p>
                    <p class="flow-text">Esta Encuenta Solo se Puede Realizar una vez</p>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-light btn">No</a>
                    <button class="btn waves-effect waves-light" type="submit" name="action">Sí
                        <i class="material-icons right">send</i>
                    </button>
                </div>
            </div>
            <div id="modal4" class="modal">
                <div class="modal-content">
                  <h4 id="nomMat">Aviso</h4>
                </div>
                <div class="modal-footer">
                    <a id="curse" class="waves-effect waves-light btn">Curse</a>
                    <a id="recurse" class="waves-effect waves-light btn">Recurse</a>
                </div>
            </div>
        </form>
        <script src="assets/js/sort.js"></script>
        <script src="assets/js/choose.js?v=2"></script>
        <script>
            function getAlumnoName() {
                $.ajax(
                    './src/alumno/sesion/getAlumno.php',
                    {
                        success: function (response) {
                            $("#alumnoName").html('&nbspBienvenid&#64;  ' + response);
                        },
                        error: function () {
                            alert('There was some error performing the AJAX call!');
                        }
                    }
                );
            }
            getAlumnoName();
        </script>
        <script>
            $(function () {
              $('form').on('submit', function(){
                $.ajax(
                    './src/alumno/materias/selectMaterias.php',
                    {
                        type: 'POST',
                        data: $('form').serialize(),
                        success: function (response) {
                            if(response==1){
                                alert("¡Materias Registradas Correctamente!");
                                location.href = "./cierrasesion";
                            }
                            else if(response==0){
                                alert("Usted ya registro materias previamente");
                                location.href = "./cierrasesion";
                            }
                        },
                        error: function () {
						    alert('There was some error performing the AJAX call!');
					    }
                    });
                });
            });
        </script>
    </body>
</html>